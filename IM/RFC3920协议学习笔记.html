<p>XMPP是一个开放式的XML协议，设计用于准实时消息和出席信息以及请求-响应服务。其基本的语法和语义最初主要是由Jabber开放源代码社区于 1999年开发的。2002年，XMPP工作组被授权接手开发和改编Jabber协议以适应IETF的即时消息和出席信息技术。作为XMPP工作组的成果，RFC3920定义了 XMPP 1.0 的核心功能。</p>
<p>XMPP的c2s和s2s都是通过tcp方式进行通讯。服务器充当XMPP通信的一个智能抽象层，它主要负责：
</p>
<ul>
    <li>对受验证的客户端，服务器以及其他实体之间以XML流形式的连接和会话进行管理；</li>
    <li>在这些实体间使用XML流对合理编址的XML节进行路由。</li>
</ul>
<p>大部分客户端通过 TCP 连接直接连到服务器，并通过XMPP获得由服务器以及联合服务器所提供的全部功能。多个不同资源（比如不同的设备和地点）的客户端可以同时登陆并且并发的连接到一个服务器，每个不同资源的客户端通过XMPP地址的资源标识符来区分，建议的客户端和服务器连接的端口是 5222 ，这个端口已经在 IANA 注册了。</p>
<p>网关是一个特殊用途的服务器端的服务，主要功能是把 XMPP 翻译成外部(非XMPP)消息系统，并把返回的消息翻译成 XMPP 。</p>
<!--more-->
<p>XMPP 抽象出一个在互联网上唯一的对象实体，用 JID 来表达。格式为：<code>jid = [ node "@" ] domain [ "/" resource ]</code></p>
<p>XML流和XML节，使得在出席信息已知的实体之间，异步交换低负载的结构化信息成为可能。XML流的定义：一个XML流是一个容器，包含了两个实体之间通过网络交换的XML元素。一个XML流是由一个XML打开标签 &lt;stream&gt; (包含适当的属性和名字空间声明)开始的,流的结尾则是一个XML关闭标签 &lt;/stream&gt;。</p>
<p>XML节的定义: 一个XML节是一个实体通过 XML 流向另一个实体发送的结构化信息中的一个离散的语义单位。目前仅限的XML节只有&lt;message/&gt;, &lt;presence/&gt;, 和 &lt;iq/&gt; 元素</p>
<table>
    <tbody>
        <tr>
            <th></th><th> 初始化方发给接收方 </th><th> 接收方发给初始化方 </th>
        </tr>
        <tr>
            <td>to </td><td> 接收方的主机名 </td><td> 忽略 </td>
        </tr>
        <tr>
            <td>from </td><td> 忽略 </td><td> 接收方的主机名 </td>
        </tr>
        <tr>
            <td>id </td><td> 忽略 </td><td> 会话键值 </td>
        </tr>
        <tr>
            <td>xml:lang </td><td> 缺省语言 </td><td> 缺省语言 </td>
        </tr>
        <tr>
            <td>version </td><td> 支持XMPP 1.0 </td><td> 支持XMPP 1.0 </td>
        </tr>
    </tbody>
</table>
<p>XMPP通过 TCP 和 SASL来确保通讯的安全。</p>
<p>在XMPP的XML节中，有五种通用属性：</p>
<ul>
    <li>to：表示节的预期接收者的JID；</li>
    <li>from：表示发送者的JID；</li>
    <li>id：可以用于为节的内部跟踪发送实体，从IQ节 语义来讲，就是通过发送和接收这些节来跟踪“请求-应答”型的交互行为；</li>
    <li>type：指明消息、出席信息或IQ节的意图或上下文的详细信息；</li>
    <li>xml:lang：指明任何一个人类可读的XML字符数据的缺省语言。</li>
</ul>
<p>&lt;message /&gt;节类型可以被看作是一个"push"机制用于一个实体推送信息给另一个实体，类似发生在email系统中的通信。&lt;presence /&gt;元素可以被看作一个基本的广播或“出版-订阅”机制，用于多个实体接收某个已订阅的实体的信息(在这里,是网络可用性信息)。 通常，一个发行实体应该不带'to'属性发送一个出席信息，这时这个实体所连接的服务器应该广播或多播那个节给所有订阅的实体。无论如何，一个发行实体也可以带'to'属性发送一个出席信息节，这时服务器应该路由或递送这个节给预定的接收者。&lt;iq /&gt;信息/查询(Info/Query),或叫IQ，是一个请求-回应机制，某些情况下类似HTTP。IQ语义学使一个实体能够向另一个实体做出请求并做出应答. 请求和应答所包含的数据定义在IQ元素的一个直接的子元素的名字空间声明中，并且由请求实体用'id'属性来跟踪这一交互行为。因而，IQ交互伴随着一个结构化的数据交换的通用模式。</p>
