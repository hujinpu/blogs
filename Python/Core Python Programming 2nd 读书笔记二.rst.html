<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">
<!-- -*- mode: rst -*- -->
<p>第二章：Python起步</p>
<p>本章主题：</p>
<ul class="simple">
<li>介绍</li>
<li>输入/输出</li>
<li>注释</li>
<li>操作符</li>
<li>变量与赋值</li>
<li>Python 类型</li>
<li>缩进</li>
<li>循环与条件</li>
<li>文件</li>
<li>错误</li>
<li>函数</li>
<li>类</li>
<li>模块</li>
</ul>
<p>Python的主提示符 <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></tt> 是解释器告诉你它在等待你输入下一个语句
Python的次提示符 <tt class="docutils literal"><span class="pre">...</span></tt> 是解释器告诉你它在等待你输入当前语句的其它部分</p>
<p>Python有两种主要的方式来完成你的要求：语句和表达式（函数、算术表达式等）</p>
<ul class="simple">
<li>语句使用关键字来组成命令，可以有输出，也可以没有输出</li>
<li>表达式没有关键字，可以是使用数学运算符构成的算术表达式，也可以是使用括号调用的函数。 <strong>在Python中未指定返回值的函数会自动返回None，等价于NULL</strong></li>
</ul>
<p>下划线 <tt class="docutils literal"><span class="pre">_</span></tt> 在解释器中有特别的含义，表示最后一个表达式的值，所以：</p>
<pre class="literal-block">
&gt;&gt;&gt; abs(-4)
4
&gt;&gt;&gt; _
4
</pre>
<p>print 语句可以和 <tt class="docutils literal"><span class="pre">%</span></tt> 结合来实现字符串替换功能，这和C中的printf()函数很像</p>
<p>Python2.0开始，print语句支持了输出重定向到文件，使用符号 <tt class="docutils literal"><span class="pre">&gt;&gt;</span></tt></p>
<pre class="literal-block">
&gt;&gt;&gt; logfile = open('test.txt', 'a')
&gt;&gt;&gt; print &gt;&gt; logfile, 'Fatal error: invalid input!'
&gt;&gt;&gt; logfile.close()
&gt;&gt;&gt; ^Z

D:\pyworks&gt;type test.txt
Fatal error: invalid input!
</pre>
<p><tt class="docutils literal"><span class="pre">raw_input()</span></tt> 内建函数。它读取标准输入，并将读取到的数据赋值给指定的变量</p>
<p><tt class="docutils literal"><span class="pre">int()</span></tt> 内建函数将用户输入的字符串转换为整数</p>
<p><tt class="docutils literal"><span class="pre">help()</span></tt> 内建函数通过用函数名作为其参数来得到相应的帮助信息</p>
<p>核心风格： <strong>一直在函数外做用户交互操作</strong> ，也就是说不要把raw_input和print放到函数体内，这样函数会更清晰，它接受参数，返回结果，除非函数的基本功能就是为了得到用户输出， 或者就是为了输出信息</p>
<p>Python也使用 <tt class="docutils literal"><span class="pre">#</span></tt> 符号标示注释，从 <tt class="docutils literal"><span class="pre">#</span></tt> 开始，直到一行结束的内容都是注释</p>
<p><tt class="docutils literal"><span class="pre">&quot;&quot;&quot;content&quot;&quot;&quot;</span></tt> 还可以用三个双引号来产生文档注释，与普通注释不同，文档字符串可以在运行时访问，也可以用来自动生成文档。可以在模块、类或者函数的起始添加</p>
<p><tt class="docutils literal"><span class="pre">//</span></tt> 浮点除法，总是舍去小数部分，返回数字序列中比真正的商小的最接近的数字，从Python 2.2开始引入进来这个新的运算符。</p>
<p>Python目前支持两种“不等于”比较运算符， <tt class="docutils literal"><span class="pre">!=</span></tt> 和 <tt class="docutils literal"><span class="pre">&lt;&gt;</span></tt> ， 分别是C风格和ABC/Pascal风格。目前后者慢慢地被淘汰了</p>
<p>Python的逻辑运算符为 <tt class="docutils literal"><span class="pre">and</span></tt> 、 <tt class="docutils literal"><span class="pre">or</span></tt> 、 <tt class="docutils literal"><span class="pre">not</span></tt></p>
<pre class="literal-block">
&gt;&gt;&gt; 3 &lt; 4 &lt; 5
True
</pre>
<p>这在Python中是合法的相当于</p>
<pre class="literal-block">
&gt;&gt;&gt; 3 &lt; 4 and 4 &lt; 5
True
</pre>
<p>Python中变量名仅仅是一些字母开头的标识符，同时大小写敏感，变量的类型和值在赋值那一刻被初始化</p>
<p>Python不支持C语言中的自增1和自减1运算符， 这是因为 <tt class="docutils literal"><span class="pre">+</span></tt> 和 <tt class="docutils literal"><span class="pre">-</span></tt> 也是单目运算符，Python会将 <tt class="docutils literal"><span class="pre">--n</span></tt> 解释为 <tt class="docutils literal"><span class="pre">-(-n)</span></tt> 从而得到n，同样 <tt class="docutils literal"><span class="pre">++n</span></tt> 的结果也是n</p>
<p>Python支持五种基本数字类型</p>
<ul class="simple">
<li>int (有符号整数)</li>
<li>long (长整数)</li>
<li>bool (布尔值)</li>
<li>float (浮点值)</li>
<li>complex (复数)</li>
</ul>
<p>Python的长整数类似于Java中的BigInteger类型，长整数仅受限于用户计算机的虚拟内存总数，且从Python 2.3开始int型会自动被转会为long</p>
<p>True和False等同于数字1和0</p>
<p>复数的虚数单位用j（或J）表示</p>
<p>对于1.1无法用二进制浮点数表示，所以Python 2.4引入了decimal包</p>
<pre class="literal-block">
&gt;&gt;&gt; 1.1
1.1000000000000001
&gt;&gt;&gt; import decimal
&gt;&gt;&gt; print decimal.Decimal('1.1')
1.1
&gt;&gt;&gt;
</pre>
<p>Python字符串比较方便的就是支持 <tt class="docutils literal"><span class="pre">[]</span></tt> 索引和 切片 <tt class="docutils literal"><span class="pre">[m:n:x]</span></tt> ， <tt class="docutils literal"><span class="pre">+</span></tt> 号用于连接字符串，而 <tt class="docutils literal"><span class="pre">*</span></tt> 可以用于重复字符串</p>
<p>这里想多说下切片 <tt class="docutils literal"><span class="pre">[m:n:x]</span></tt> ， <strong>其中m是起始值，如果为空，那么默认代表首位置，n为停止值（不包括n），如果为空，那么默认代表末尾位置，x为移动的方向和步长，如果为正数，就朝右移动，如果为负数，则向左移动，x的绝对值是移动的步长。</strong></p>
<p>列表和元组可以存储不同类型的对象</p>
<p>列表和元组有几处重要的区别：</p>
<ul class="simple">
<li>列表元素用中括号 <tt class="docutils literal"><span class="pre">[]</span></tt> 包裹，元组元素用小括号 <tt class="docutils literal"><span class="pre">()</span></tt> 包裹；</li>
<li>列表元素的个数及元素的值可以改变，元组不可以更改（尽管他们的内容可以）。元组可以看成是只读的列表。</li>
</ul>
<p>字典元素用大括号 <tt class="docutils literal"><span class="pre">{}</span></tt> 包裹，值可以是任何对象，而键只能是任何不可改变的对象。一般用数字或者字符串做键</p>
<p>Python的缩进完全为了产生简洁可读性好的代码，建议使用空格取代tab，详情可以参考 <a class="reference" href="http://www.secnetix.de/~olli/Python/block_indentation.hawk">Python: Myths about Indentation</a></p>
<p>与其它语言不同， 条件条达式并不需要用括号括起来， <tt class="docutils literal"><span class="pre">elif</span></tt> 意为 &quot;else if&quot;， 目前Python中还不支持switch/case</p>
<p>Python中的 <tt class="docutils literal"><span class="pre">for</span></tt> 接受 <em>可迭代对象</em> （例如序列或迭代器）作为其参数，每次迭代其中一个元素</p>
<p><tt class="docutils literal"><span class="pre">print</span></tt> 语句默认会给每一行添加一个换行符。只要在 <tt class="docutils literal"><span class="pre">print</span></tt> 语句的最后添加一个逗号 <tt class="docutils literal"><span class="pre">,</span></tt> ，就不会自动加上换行符。但带逗号的 <tt class="docutils literal"><span class="pre">print</span></tt> 语句输出的元素之间会自动添加一个空格</p>
<p><tt class="docutils literal"><span class="pre">len()</span></tt> 内建函数返回序列的长度</p>
<pre class="literal-block">
&gt;&gt;&gt; sqdEvens = [x ** 2 for x in range(8) if not x %2]
&gt;&gt;&gt; for i in sqdEvens:
...     print i,
...
0 4 16 36
&gt;&gt;&gt;
</pre>
<p>这就是列表解析，也称列表推导式，它的形式为一个表达式，紧接着一个for语句，然后再零个或多个for和if语句</p>
<p><tt class="docutils literal"><span class="pre">handle</span> <span class="pre">=</span> <span class="pre">open(file_name,</span> <span class="pre">access_mode</span> <span class="pre">=</span> <span class="pre">'r')</span></tt> 可以打开一个文件 access_mode中r为读取，w为写入，+为读写，b为二进制访问</p>
<p><tt class="docutils literal"><span class="pre">file()</span></tt> 内建函数是最近才添加到Python当中的。它的功能等同于 <tt class="docutils literal"><span class="pre">open()</span></tt></p>
<p>要给你的代码添加错误检测及异常处理，只要将它们封装在try-except语句当中。 <tt class="docutils literal"><span class="pre">try</span></tt> 之后的代码块，就是你打算捕获异常的代码， <tt class="docutils literal"><span class="pre">except</span></tt> 之后的代码块，则是你处理异常的代码。</p>
<p><strong>Python是通过引用调用的</strong> 。这意味着函数内对参数的改变会影响到原始对象。不过事实上只有可变对象会受此影响，对不可变对象来说，它的行为类似按值调用。</p>
<pre class="literal-block">
def test_params1(p1):
    if p1:
        p1[0] = 100

def test_params2(p2):
    if p2:
        p2 = 300

if __name__ == '__main__':
    a = [1, 2, 3]
    b = 10
    test_params1(a)
    print a
    test_params2(b)
    print b

结果为：
[100, 2, 3]
10
</pre>
<p>Python语言中调用函数与在其它高级语言中一样，函数名加上函数运算符，一对小括号。括号之间是所有可选的参数。 <strong>即使一个参数也没有，小括号也不能省略，注意区分语句和函数</strong></p>
<p>Python中使用 <tt class="docutils literal"><span class="pre">class</span></tt> 关键字定义类。可以提供一个可选的父类或者说基类， <strong>如果没有合适的基类，那就使用 ``object`` 作为基类</strong> 。 <tt class="docutils literal"><span class="pre">class</span></tt> 行之后是可选的文档字符串，静态成员定义，及方法定义。</p>
<p>在类实例创建完毕后会自动执行 <tt class="docutils literal"><span class="pre">__init__()</span></tt> 方法，不过不象其它语言中的构建函数，它并不创建实例， <strong>它仅仅是你的对象创建后执行的第一个方法</strong> 。它的目的是执行一些该对象的必要的初始化工作。</p>
<p>和Java的构造函数一样，如果你没有提供默认的 <tt class="docutils literal"><span class="pre">__init__()</span></tt> 方法，会自动产生一个调用基类的 <tt class="docutils literal"><span class="pre">__init__()</span></tt> 方法的 <tt class="docutils literal"><span class="pre">__init__()</span></tt> 方法</p>
<p><tt class="docutils literal"><span class="pre">self</span></tt> 是类实例自身的引用，这和Java的this很相似， <tt class="docutils literal"><span class="pre">self.__class__</span></tt> 引用实际的类</p>
<p>模块是一种组织形式，可以包含可执行代码，函数和类</p>
<p>导入模块有两种方式:</p>
<ul class="simple">
<li>import module_name</li>
<li>from module_name import * 但这种不会导入_开头的命名</li>
</ul>
<p>一个 <a class="reference" href="http://python.org/dev/peps.">PEP</a> 就是一个Python增强提案(Python Enhancement Proposal)，这也是在新版Python中增加新特性的方式。它们不但提供了新特性的完整描述，还有添加这些新特性的理由，如果需要的话，还会提供新的语法、技术实现细节、向后兼容信息等等。在一个新特性被整合进Python之前，必须通过Python 开发社区，PEP作者及实现者，还有Python 的创始人， <cite>Guido van Rossum</cite> (Python 终身的仁慈的独裁者）的一致同意。PEP1阐述了PEP 的目标及书写指南。在PEP0中可以找到所有的PEP。</p>
<p>有用的内建函数：</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">函数</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>dir([obj])</td>
<td>显示对象的属性，如果没有提供参数，则显示全局变量的名字</td>
</tr>
<tr><td>help([obj])</td>
<td>以一种整齐美观的形式显示对象的文档字符串，如果没有提供任何参数，则会进入交互式帮助</td>
</tr>
<tr><td>int(obj)</td>
<td>将一个对象转换为整数</td>
</tr>
<tr><td>len(obj)</td>
<td>返回对象的长度</td>
</tr>
<tr><td>open(fn, mode)</td>
<td>以mode('r' = 读， 'w'= 写)方式打开一个文件名为fn的文件</td>
</tr>
<tr><td>range([[start,]stop[,step])</td>
<td>返回一个整数列表，起始值为start，结束值为stop - 1，start默认值为0，step默认值为1</td>
</tr>
<tr><td>raw_input(str)</td>
<td>等待用户输入一个字符串，可以提供一个可选的参数str用作提示信息</td>
</tr>
<tr><td>str(obj)</td>
<td>将一个对象转换为字符串</td>
</tr>
<tr><td>type(obj)</td>
<td>返回对象的类型（返回值本身是一个type对象！）</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>
